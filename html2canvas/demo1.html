<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>

</head>

<body>
<img id="predict_img">
<a href="javascript:void(0)" class="gen">生成图片</a>
<div id="gen_img" style="width:600px; height:400px; position:relative;">
ddfgssfs
<img src="images/1.png">

<div id="qrcode" style="display:block; position:absolute; left:100px; top:200px; width:140px; height:140px;"></div>



</div>

<script src="https://ossweb-img.qq.com/images/js/jquery/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/es6-promise.auto.js"></script>
<script type="text/javascript" src="js/jquery.qrcode.js"></script>
<script type="text/javascript" src="js/qrcode.js"></script>
<script src="js/html2canvas.min.js"></script>
<script>

function getBase64Image(imgurl) {
 	var img = new Image();
 	img.src = imgurl;
 	img.setAttribute('crossOrigin', 'anonymous');
 	img.onload=function(){
 	     var canvas = document.createElement("canvas");
 	     canvas.width = 300;
 	     canvas.height = 300;
	    var ctx = canvas.getContext("2d");
	    ctx.drawImage(img, 0, 0, 300, 300);
	    var dataURL = canvas.toDataURL("image/png"); 
	    $("#img").attr("src",dataURL);
	    
 	}
}


$('#qrcode').qrcode({
		text	: "https://www.sonystyle.com.cn/smallapp/acafe/detail_mobile.htm#fileId=1000",
		width		: 140,
		height		: 140
	});	

		
$(".gen").click(function(){
	
	
	
	
	html2canvas($("#gen_img")[0], {scale:1,logging:false,useCORS:true}).then(function(canvas) {
           // var dataUrl = canvas.toDataURL();
			var dataUrl = canvas.toDataURL("image/png");
            $("#predict_img").attr("src",dataUrl);
			//document.body.appendChild(canvas)
        });
	
	})		
		


</script>
</body>
</html>
